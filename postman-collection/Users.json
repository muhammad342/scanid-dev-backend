{
  "info": {
    "name": "Users",
    "description": "Complete API collection for User management with multi-role support. Includes endpoints for authentication, user profile management, user administration, and role management with context-based access control for different roles (super admin, edition admin, company admin, channel admin, user, and delegate).",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "version": "2.0.0"
  },
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{jwt_token}}",
        "type": "string"
      }
    ]
  },
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:8000/api/v1",
      "type": "string"
    },
    {
      "key": "jwt_token",
      "value": "your_jwt_token_here",
      "type": "string"
    },
    {
      "key": "system_edition_id",
      "value": "your_system_edition_id_here",
      "type": "string"
    },
    {
      "key": "user_id",
      "value": "your_user_id_here",
      "type": "string"
    },
    {
      "key": "company_id",
      "value": "your_company_id_here",
      "type": "string"
    },
    {
      "key": "channel_id",
      "value": "your_channel_id_here",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "Authentication",
      "description": "Public authentication endpoints (no authentication required)",
      "item": [
        {
          "name": "User Login",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"admin@example.com\",\n  \"password\": \"Password123!\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{base_url}}/users/login",
              "host": ["{{base_url}}"],
              "path": ["users", "login"]
            },
            "description": "Authenticate user and receive JWT token"
          },
          "response": [
            {
              "name": "Success Response",
              "originalRequest": {
                "method": "POST",
                "url": {
                  "raw": "{{base_url}}/users/login"
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
                              "body": {
                  "success": true,
                  "message": "Login successful",
                  "data": {
                    "user": {
                      "id": "uuid",
                      "email": "admin@example.com",
                      "firstName": "John",
                      "lastName": "Doe",
                      "activeRole": {
                        "id": "user-role-uuid",
                        "roleName": "super_admin",
                        "systemEditionId": "uuid",
                        "companyId": "uuid",
                        "channelId": null,
                        "expiresAt": null
                      },
                      "availableRoles": [
                        {
                          "id": "user-role-uuid",
                          "roleName": "super_admin",
                          "systemEditionId": "uuid",
                          "companyId": "uuid",
                          "channelId": null,
                          "expiresAt": null,
                          "isActive": true
                        }
                      ],
                      "isActive": true,
                      "emailVerified": true,
                      "companyAssociations": ["uuid"],
                      "createdAt": "2024-01-01T00:00:00.000Z",
                      "updatedAt": "2024-01-01T00:00:00.000Z"
                    },
                    "token": "jwt_token_here"
                  },
                  "timestamp": "2024-01-01T00:00:00.000Z"
                }
            }
          ]
        },
        {
          "name": "User Registration",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"newuser@example.com\",\n  \"password\": \"Password123!\",\n  \"firstName\": \"Jane\",\n  \"lastName\": \"Smith\",\n  \"phoneNumber\": \"+1234567890\",\n  \"roles\": [\n    {\n      \"roleName\": \"user\"\n    }\n  ]\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{base_url}}/users/register",
              "host": ["{{base_url}}"],
              "path": ["users", "register"]
            },
            "description": "Register a new user account"
          },
          "response": [
            {
              "name": "Success Response",
              "originalRequest": {
                "method": "POST",
                "url": {
                  "raw": "{{base_url}}/users/register"
                }
              },
              "status": "Created",
              "code": 201,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "body": {
                "success": true,
                "message": "User registered successfully",
                "data": {
                  "id": "uuid",
                  "email": "newuser@example.com",
                  "firstName": "Jane",
                  "lastName": "Smith",
                  "role": "user",
                  "isActive": true,
                  "emailVerified": false,
                  "phoneNumber": "+1234567890",
                  "createdAt": "2024-01-01T00:00:00.000Z",
                  "updatedAt": "2024-01-01T00:00:00.000Z"
                },
                "timestamp": "2024-01-01T00:00:00.000Z"
              }
            }
          ]
        }
      ]
    },
    {
      "name": "User Profile",
      "description": "User profile management endpoints (accessible to all authenticated users)",
      "item": [
        {
          "name": "Get My Profile",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/users/profile",
              "host": ["{{base_url}}"],
              "path": ["users", "profile"]
            },
            "description": "Get current user's profile information"
          },
          "response": [
            {
              "name": "Success Response",
              "originalRequest": {
                "method": "GET",
                "url": {
                  "raw": "{{base_url}}/users/profile"
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
                              "body": {
                  "success": true,
                  "message": "User profile retrieved successfully",
                  "data": {
                    "id": "uuid",
                    "email": "user@example.com",
                    "firstName": "John",
                    "lastName": "Doe",
                    "activeRole": {
                      "id": "user-role-uuid",
                      "roleName": "user",
                      "systemEditionId": "uuid",
                      "companyId": "uuid",
                      "channelId": null,
                      "expiresAt": null
                    },
                    "availableRoles": [
                      {
                        "id": "user-role-uuid",
                        "roleName": "user",
                        "systemEditionId": "uuid",
                        "companyId": "uuid",
                        "channelId": null,
                        "expiresAt": null,
                        "isActive": true
                      }
                    ],
                    "isActive": true,
                    "emailVerified": true,
                    "phoneNumber": "+1234567890",
                    "companyAssociations": ["uuid"],
                    "createdAt": "2024-01-01T00:00:00.000Z",
                    "updatedAt": "2024-01-01T00:00:00.000Z"
                  },
                  "timestamp": "2024-01-01T00:00:00.000Z"
                }
            }
          ]
        },
        {
          "name": "Update My Profile",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"firstName\": \"Updated First Name\",\n  \"lastName\": \"Updated Last Name\",\n  \"phoneNumber\": \"+1987654321\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{base_url}}/users/profile",
              "host": ["{{base_url}}"],
              "path": ["users", "profile"]
            },
            "description": "Update current user's profile information"
          },
          "response": [
            {
              "name": "Success Response",
              "originalRequest": {
                "method": "PUT",
                "url": {
                  "raw": "{{base_url}}/users/profile"
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "body": {
                "success": true,
                "message": "User profile updated successfully",
                "data": {
                  "id": "uuid",
                  "email": "user@example.com",
                  "firstName": "Updated First Name",
                  "lastName": "Updated Last Name",
                  "role": "user",
                  "isActive": true,
                  "emailVerified": true,
                  "phoneNumber": "+1987654321",
                  "systemEditionId": "uuid",
                  "companyId": "uuid",
                  "createdAt": "2024-01-01T00:00:00.000Z",
                  "updatedAt": "2024-01-01T00:00:00.000Z"
                },
                "timestamp": "2024-01-01T00:00:00.000Z"
              }
            }
          ]
        }
      ]
    },
    {
      "name": "User Management",
      "description": "User administration endpoints (accessible to super admin, edition admin, and company admin)",
      "item": [
        {
          "name": "Create User",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"newuser@example.com\",\n  \"firstName\": \"John\",\n  \"lastName\": \"Doe\",\n  \"phoneNumber\": \"+1234567890\",\n  \"roles\": [\n    {\n      \"roleName\": \"user\",\n      \"systemEditionId\": \"{{system_edition_id}}\",\n      \"companyId\": \"{{company_id}}\"\n    }\n  ],\n  \"isActive\": true,\n  \"emailVerified\": false,\n  \"seatAssigned\": false,\n  \"licenseType\": \"none\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{base_url}}/users",
              "host": ["{{base_url}}"],
              "path": ["users"]
            },
            "description": "Create a new user. Access is scoped by user role:\n- Super Admin: Can create any role except super_admin (for other super admins)\n- Edition Admin: Can create edition_admin, company_admin, user, delegate\n- Company Admin: Can create user, delegate only\n\nContext is automatically resolved based on the authenticated user's role and scope."
          },
          "response": [
            {
              "name": "Success Response - User Created",
              "originalRequest": {
                "method": "POST",
                "url": {
                  "raw": "{{base_url}}/users"
                },
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"email\": \"newuser@example.com\",\n  \"firstName\": \"John\",\n  \"lastName\": \"Doe\",\n  \"role\": \"user\"\n}"
                }
              },
              "status": "Created",
              "code": 201,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
                              "body": {
                  "success": true,
                  "message": "User created successfully",
                  "data": {
                    "id": "uuid",
                    "email": "newuser@example.com",
                    "firstName": "John",
                    "lastName": "Doe",
                    "activeRole": {
                      "id": "user-role-uuid",
                      "roleName": "user",
                      "systemEditionId": "uuid",
                      "companyId": "uuid",
                      "channelId": null,
                      "expiresAt": null
                    },
                    "availableRoles": [
                      {
                        "id": "user-role-uuid",
                        "roleName": "user",
                        "systemEditionId": "uuid",
                        "companyId": "uuid",
                        "channelId": null,
                        "expiresAt": null,
                        "isActive": true
                      }
                    ],
                    "isActive": true,
                    "emailVerified": false,
                    "phoneNumber": "+1234567890",
                    "seatAssigned": false,
                    "licenseType": "none",
                    "companyAssociations": ["uuid"],
                    "createdAt": "2024-01-01T00:00:00.000Z",
                    "updatedAt": "2024-01-01T00:00:00.000Z"
                  },
                  "timestamp": "2024-01-01T00:00:00.000Z"
                }
            },
            {
              "name": "Error Response - Invalid Role",
              "originalRequest": {
                "method": "POST",
                "url": {
                  "raw": "{{base_url}}/users"
                },
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"email\": \"admin@example.com\",\n  \"firstName\": \"Admin\",\n  \"lastName\": \"User\",\n  \"role\": \"super_admin\"\n}"
                }
              },
              "status": "Bad Request",
              "code": 400,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "body": {
                "success": false,
                "message": "Edition admins cannot create super admins",
                "timestamp": "2024-01-01T00:00:00.000Z"
              }
            },
            {
              "name": "Error Response - Email Already Exists",
              "originalRequest": {
                "method": "POST",
                "url": {
                  "raw": "{{base_url}}/users"
                },
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"email\": \"existing@example.com\",\n  \"firstName\": \"John\",\n  \"lastName\": \"Doe\",\n  \"role\": \"user\"\n}"
                }
              },
              "status": "Bad Request",
              "code": 400,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "body": {
                "success": false,
                "message": "User already exists with this email",
                "timestamp": "2024-01-01T00:00:00.000Z"
              }
            }
          ]
        },
        {
          "name": "Create Company Admin",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"companyadmin@example.com\",\n  \"firstName\": \"Company\",\n  \"lastName\": \"Admin\",\n  \"phoneNumber\": \"+1234567890\",\n  \"roles\": [\n    {\n      \"roleName\": \"company_admin\",\n      \"systemEditionId\": \"{{system_edition_id}}\",\n      \"companyId\": \"{{company_id}}\"\n    }\n  ],\n  \"isActive\": true,\n  \"emailVerified\": true,\n  \"expirationDate\": \"2025-12-31T23:59:59.000Z\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{base_url}}/users",
              "host": ["{{base_url}}"],
              "path": ["users"]
            },
            "description": "Create a company admin user. Only super_admin and edition_admin can create company_admin users."
          },
          "response": [
            {
              "name": "Success Response - Company Admin Created",
              "originalRequest": {
                "method": "POST",
                "url": {
                  "raw": "{{base_url}}/users"
                },
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"email\": \"companyadmin@example.com\",\n  \"firstName\": \"Company\",\n  \"lastName\": \"Admin\",\n  \"role\": \"company_admin\"\n}"
                }
              },
              "status": "Created",
              "code": 201,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
                              "body": {
                  "success": true,
                  "message": "User created successfully",
                  "data": {
                    "id": "uuid",
                    "email": "companyadmin@example.com",
                    "firstName": "Company",
                    "lastName": "Admin",
                    "activeRole": {
                      "id": "user-role-uuid",
                      "roleName": "company_admin",
                      "systemEditionId": "uuid",
                      "companyId": "uuid",
                      "channelId": null,
                      "expiresAt": null
                    },
                    "availableRoles": [
                      {
                        "id": "user-role-uuid",
                        "roleName": "company_admin",
                        "systemEditionId": "uuid",
                        "companyId": "uuid",
                        "channelId": null,
                        "expiresAt": null,
                        "isActive": true
                      }
                    ],
                    "isActive": true,
                    "emailVerified": true,
                    "phoneNumber": "+1234567890",
                    "expirationDate": "2025-12-31T23:59:59.000Z",
                    "companyAssociations": ["uuid"],
                    "createdAt": "2024-01-01T00:00:00.000Z",
                    "updatedAt": "2024-01-01T00:00:00.000Z"
                  },
                  "timestamp": "2024-01-01T00:00:00.000Z"
                }
            }
          ]
        },
        {
          "name": "Create User with Seat Assignment",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"seatuser@example.com\",\n  \"firstName\": \"Seat\",\n  \"lastName\": \"User\",\n  \"phoneNumber\": \"+1234567890\",\n  \"roles\": [\n    {\n      \"roleName\": \"user\",\n      \"systemEditionId\": \"{{system_edition_id}}\",\n      \"companyId\": \"{{company_id}}\"\n    }\n  ],\n  \"isActive\": true,\n  \"emailVerified\": false,\n  \"seatAssigned\": true,\n  \"licenseType\": \"organizational_seat\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{base_url}}/users",
              "host": ["{{base_url}}"],
              "path": ["users"]
            },
            "description": "Create a user with seat assignment. This will increment the company's used seats count."
          },
          "response": [
            {
              "name": "Success Response - User with Seat Created",
              "originalRequest": {
                "method": "POST",
                "url": {
                  "raw": "{{base_url}}/users"
                },
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"email\": \"seatuser@example.com\",\n  \"firstName\": \"Seat\",\n  \"lastName\": \"User\",\n  \"seatAssigned\": true,\n  \"licenseType\": \"organizational_seat\"\n}"
                }
              },
              "status": "Created",
              "code": 201,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
                              "body": {
                  "success": true,
                  "message": "User created successfully",
                  "data": {
                    "id": "uuid",
                    "email": "seatuser@example.com",
                    "firstName": "Seat",
                    "lastName": "User",
                    "activeRole": {
                      "id": "user-role-uuid",
                      "roleName": "user",
                      "systemEditionId": "uuid",
                      "companyId": "uuid",
                      "channelId": null,
                      "expiresAt": null
                    },
                    "availableRoles": [
                      {
                        "id": "user-role-uuid",
                        "roleName": "user",
                        "systemEditionId": "uuid",
                        "companyId": "uuid",
                        "channelId": null,
                        "expiresAt": null,
                        "isActive": true
                      }
                    ],
                    "isActive": true,
                    "emailVerified": false,
                    "phoneNumber": "+1234567890",
                    "seatAssigned": true,
                    "licenseType": "organizational_seat",
                    "companyAssociations": ["uuid"],
                    "createdAt": "2024-01-01T00:00:00.000Z",
                    "updatedAt": "2024-01-01T00:00:00.000Z"
                  },
                  "timestamp": "2024-01-01T00:00:00.000Z"
                }
            }
          ]
        },
        {
          "name": "Get All Users",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/users?page=1&limit=10&search=&role=&isActive=&emailVerified=&systemEditionId=&channelId=&companyId=",
              "host": ["{{base_url}}"],
              "path": ["users"],
              "query": [
                {
                  "key": "page",
                  "value": "1",
                  "description": "Page number (default: 1)"
                },
                {
                  "key": "limit",
                  "value": "10",
                  "description": "Items per page (default: 10)"
                },
                {
                  "key": "search",
                  "value": "",
                  "description": "Search term for firstName, lastName, or email",
                  "disabled": true
                },
                {
                  "key": "role",
                  "value": "",
                  "description": "Filter by user role (super_admin, edition_admin, company_admin, user, delegate)",
                  "disabled": true
                },
                {
                  "key": "isActive",
                  "value": "",
                  "description": "Filter by active status (true/false)",
                  "disabled": true
                },
                {
                  "key": "emailVerified",
                  "value": "",
                  "description": "Filter by email verification status (true/false)",
                  "disabled": true
                },
                {
                  "key": "systemEditionId",
                  "value": "",
                  "description": "Filter by system edition ID (optional)",
                  "disabled": true
                },
                {
                  "key": "channelId",
                  "value": "",
                  "description": "Filter by channel ID (optional)",
                  "disabled": true
                },
                {
                  "key": "companyId",
                  "value": "",
                  "description": "Filter by company ID (optional)",
                  "disabled": true
                }
              ]
            },
            "description": "Get all users with filtering and pagination. Access is scoped by user role:\n- Super Admin: Can see all users across all editions\n- Edition Admin: Can only see users within their assigned edition\n- Company Admin: Can only see users within their assigned company\n\nNew filters available:\n- systemEditionId: Filter users by specific system edition\n- channelId: Filter users by specific channel\n- companyId: Filter users by specific company\n\nAll filters are optional and can be combined for precise filtering."
          },
          "response": [
            {
              "name": "Success Response",
              "originalRequest": {
                "method": "GET",
                "url": {
                  "raw": "{{base_url}}/users?page=1&limit=10"
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "body": {
                "success": true,
                "message": "Users retrieved successfully",
                "data": [
                  {
                    "id": "uuid",
                    "email": "user1@example.com",
                    "firstName": "John",
                    "lastName": "Doe",
                    "activeRole": {
                      "id": "user-role-uuid",
                      "roleName": "user",
                      "systemEditionId": "uuid",
                      "companyId": "uuid",
                      "channelId": null,
                      "expiresAt": null
                    },
                    "availableRoles": [
                      {
                        "id": "user-role-uuid",
                        "roleName": "user",
                        "systemEditionId": "uuid",
                        "companyId": "uuid",
                        "channelId": null,
                        "expiresAt": null,
                        "isActive": true
                      }
                    ],
                    "isActive": true,
                    "emailVerified": true,
                    "phoneNumber": "+1234567890",
                    "companyAssociations": ["uuid"],
                    "createdAt": "2024-01-01T00:00:00.000Z",
                    "updatedAt": "2024-01-01T00:00:00.000Z"
                  }
                ],
                "pagination": {
                  "page": 1,
                  "limit": 10,
                  "total": 1,
                  "totalPages": 1,
                  "hasNextPage": false,
                  "hasPrevPage": false
                },
                "timestamp": "2024-01-01T00:00:00.000Z"
              }
            }
          ]
        },
        {
          "name": "Get User by ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/users/{{user_id}}",
              "host": ["{{base_url}}"],
              "path": ["users", "{{user_id}}"]
            },
            "description": "Get a specific user by ID. Access is scoped by user role and context."
          },
          "response": [
            {
              "name": "Success Response",
              "originalRequest": {
                "method": "GET",
                "url": {
                  "raw": "{{base_url}}/users/{{user_id}}"
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "body": {
                "success": true,
                "message": "User retrieved successfully",
                "data": {
                  "id": "uuid",
                  "email": "user@example.com",
                  "firstName": "John",
                  "lastName": "Doe",
                  "activeRole": {
                    "id": "user-role-uuid",
                    "roleName": "user",
                    "systemEditionId": "uuid",
                    "companyId": "uuid",
                    "channelId": null,
                    "expiresAt": null
                  },
                  "availableRoles": [
                    {
                      "id": "user-role-uuid",
                      "roleName": "user",
                      "systemEditionId": "uuid",
                      "companyId": "uuid",
                      "channelId": null,
                      "expiresAt": null,
                      "isActive": true
                    }
                  ],
                  "isActive": true,
                  "emailVerified": true,
                  "phoneNumber": "+1234567890",
                  "createdAt": "2024-01-01T00:00:00.000Z",
                  "updatedAt": "2024-01-01T00:00:00.000Z"
                },
                "timestamp": "2024-01-01T00:00:00.000Z"
              }
            }
          ]
        },
        {
          "name": "Update User",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"firstName\": \"Updated First Name\",\n  \"lastName\": \"Updated Last Name\",\n  \"email\": \"updated@example.com\",\n  \"phoneNumber\": \"+1987654321\",\n  \"isActive\": true,\n  \"emailVerified\": true\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{base_url}}/users/{{user_id}}",
              "host": ["{{base_url}}"],
              "path": ["users", "{{user_id}}"]
            },
            "description": "Update a specific user by ID. Access is scoped by user role and context."
          },
          "response": [
            {
              "name": "Success Response",
              "originalRequest": {
                "method": "PUT",
                "url": {
                  "raw": "{{base_url}}/users/{{user_id}}"
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "body": {
                "success": true,
                "message": "User updated successfully",
                "data": {
                  "id": "uuid",
                  "email": "updated@example.com",
                  "firstName": "Updated First Name",
                  "lastName": "Updated Last Name",
                  "activeRole": {
                    "id": "user-role-uuid",
                    "roleName": "user",
                    "systemEditionId": "uuid",
                    "companyId": "uuid",
                    "channelId": null,
                    "expiresAt": null
                  },
                  "availableRoles": [
                    {
                      "id": "user-role-uuid",
                      "roleName": "user",
                      "systemEditionId": "uuid",
                      "companyId": "uuid",
                      "channelId": null,
                      "expiresAt": null,
                      "isActive": true
                    }
                  ],
                  "isActive": true,
                  "emailVerified": true,
                  "phoneNumber": "+1987654321",
                  "companyAssociations": ["uuid"],
                  "createdAt": "2024-01-01T00:00:00.000Z",
                  "updatedAt": "2024-01-01T00:00:00.000Z"
                },
                "timestamp": "2024-01-01T00:00:00.000Z"
              }
            }
          ]
        },
        {
          "name": "Delete User",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/users/{{user_id}}",
              "host": ["{{base_url}}"],
              "path": ["users", "{{user_id}}"]
            },
            "description": "Delete a specific user by ID. Access is scoped by user role and context. Only super admin and edition admin can delete users."
          },
          "response": [
            {
              "name": "Success Response",
              "originalRequest": {
                "method": "DELETE",
                "url": {
                  "raw": "{{base_url}}/users/{{user_id}}"
                }
              },
              "status": "No Content",
              "code": 204,
              "_postman_previewlanguage": "json",
              "header": [],
              "body": ""
            }
          ]
        },
        {
          "name": "Get Users with Advanced Filtering",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/users?page=1&limit=20&systemEditionId={{system_edition_id}}&companyId={{company_id}}&roleName=user&isActive=true",
              "host": ["{{base_url}}"],
              "path": ["users"],
              "query": [
                {
                  "key": "page",
                  "value": "1",
                  "description": "Page number"
                },
                {
                  "key": "limit",
                  "value": "20",
                  "description": "Items per page"
                },
                {
                  "key": "systemEditionId",
                  "value": "{{system_edition_id}}",
                  "description": "Filter by system edition ID"
                },
                {
                  "key": "companyId",
                  "value": "{{company_id}}",
                  "description": "Filter by company ID"
                },
                {
                  "key": "roleName",
                  "value": "user",
                  "description": "Filter by role name"
                },
                {
                  "key": "isActive",
                  "value": "true",
                  "description": "Filter by active status"
                }
              ]
            },
            "description": "Example of advanced filtering combining multiple parameters:\n- systemEditionId: Filter users by specific system edition\n- companyId: Filter users by specific company\n- roleName: Filter users by specific role\n- isActive: Filter only active users\n\nThis demonstrates how the new filtering system allows for precise user queries across different organizational contexts."
          },
          "response": [
            {
              "name": "Success Response - Filtered Users",
              "originalRequest": {
                "method": "GET",
                "url": {
                  "raw": "{{base_url}}/users?page=1&limit=20&systemEditionId={{system_edition_id}}&companyId={{company_id}}&roleName=user&isActive=true"
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "body": {
                "success": true,
                "message": "Users retrieved successfully",
                "data": [
                  {
                    "id": "uuid",
                    "email": "user@example.com",
                    "firstName": "John",
                    "lastName": "Doe",
                    "activeRole": {
                      "id": "user-role-uuid",
                      "roleName": "user",
                      "systemEditionId": "{{system_edition_id}}",
                      "companyId": "{{company_id}}",
                      "channelId": null,
                      "expiresAt": null
                    },
                    "availableRoles": [
                      {
                        "id": "user-role-uuid",
                        "roleName": "user",
                        "systemEditionId": "{{system_edition_id}}",
                        "companyId": "{{company_id}}",
                        "channelId": null,
                        "expiresAt": null,
                        "isActive": true
                      }
                    ],
                    "isActive": true,
                    "emailVerified": true,
                    "phoneNumber": "+1234567890",
                    "companyAssociations": ["{{company_id}}"],
                    "createdAt": "2024-01-01T00:00:00.000Z",
                    "updatedAt": "2024-01-01T00:00:00.000Z"
                  }
                ],
                "pagination": {
                  "page": 1,
                  "limit": 20,
                  "total": 1,
                  "totalPages": 1,
                  "hasNextPage": false,
                  "hasPrevPage": false
                },
                "timestamp": "2024-01-01T00:00:00.000Z"
              }
            }
          ]
        },
        {
          "name": "Get Users by Channel",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/users?page=1&limit=10&channelId={{channel_id}}&roleName=channel_admin",
              "host": ["{{base_url}}"],
              "path": ["users"],
              "query": [
                {
                  "key": "page",
                  "value": "1",
                  "description": "Page number"
                },
                {
                  "key": "limit",
                  "value": "10",
                  "description": "Items per page"
                },
                {
                  "key": "channelId",
                  "value": "{{channel_id}}",
                  "description": "Filter by channel ID"
                },
                {
                  "key": "roleName",
                  "value": "channel_admin",
                  "description": "Filter by role name"
                }
              ]
            },
            "description": "Example of filtering users by channel ID. This is useful for:\n- Channel admins to see users in their channel\n- Super admins to analyze channel-specific user distribution\n- System administrators to manage channel-level access\n\nNote: channel_id variable should be set in your Postman environment."
          },
          "response": [
            {
              "name": "Success Response - Channel Users",
              "originalRequest": {
                "method": "GET",
                "url": {
                  "raw": "{{base_url}}/users?page=1&limit=10&channelId={{channel_id}}&roleName=channel_admin"
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "body": {
                "success": true,
                "message": "Users retrieved successfully",
                "data": [
                  {
                    "id": "uuid",
                    "email": "channeladmin@example.com",
                    "firstName": "Channel",
                    "lastName": "Admin",
                    "activeRole": {
                      "id": "user-role-uuid",
                      "roleName": "channel_admin",
                      "systemEditionId": "{{system_edition_id}}",
                      "companyId": "{{company_id}}",
                      "channelId": "{{channel_id}}",
                      "expiresAt": null
                    },
                    "availableRoles": [
                      {
                        "id": "user-role-uuid",
                        "roleName": "channel_admin",
                        "systemEditionId": "{{system_edition_id}}",
                        "companyId": "{{company_id}}",
                        "channelId": "{{channel_id}}",
                        "expiresAt": null,
                        "isActive": true
                      }
                    ],
                    "isActive": true,
                    "emailVerified": true,
                    "phoneNumber": "+1234567890",
                    "companyAssociations": ["{{company_id}}"],
                    "createdAt": "2024-01-01T00:00:00.000Z",
                    "updatedAt": "2024-01-01T00:00:00.000Z"
                  }
                ],
                "pagination": {
                  "page": 1,
                  "limit": 10,
                  "total": 1,
                  "totalPages": 1,
                  "hasNextPage": false,
                  "hasPrevPage": false
                },
                "timestamp": "2024-01-01T00:00:00.000Z"
              }
            }
          ]
        }
      ]
    },
    {
      "name": "System Edition Users",
      "description": "System edition specific user management (accessible to super admin and edition admin)",
      "item": [
        {
          "name": "Get Users by System Edition",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/users/system-edition/{{system_edition_id}}?page=1&limit=10&search=&role=&isActive=&emailVerified=",
              "host": ["{{base_url}}"],
              "path": ["users", "system-edition", "{{system_edition_id}}"],
              "query": [
                {
                  "key": "page",
                  "value": "1",
                  "description": "Page number (default: 1)"
                },
                {
                  "key": "limit",
                  "value": "10",
                  "description": "Items per page (default: 10)"
                },
                {
                  "key": "search",
                  "value": "",
                  "description": "Search term for firstName, lastName, or email",
                  "disabled": true
                },
                {
                  "key": "role",
                  "value": "",
                  "description": "Filter by user role (defaults to 'user')",
                  "disabled": true
                },
                {
                  "key": "isActive",
                  "value": "",
                  "description": "Filter by active status (true/false)",
                  "disabled": true
                },
                {
                  "key": "emailVerified",
                  "value": "",
                  "description": "Filter by email verification status (true/false)",
                  "disabled": true
                }
              ]
            },
            "description": "Get users for a specific system edition with filtering and pagination. Access is scoped by user role:\n- Super Admin: Can access any system edition\n- Edition Admin: Can only access their assigned edition"
          },
          "response": [
            {
              "name": "Success Response",
              "originalRequest": {
                "method": "GET",
                "url": {
                  "raw": "{{base_url}}/users/system-edition/{{system_edition_id}}?page=1&limit=10"
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "body": {
                "success": true,
                "message": "Users retrieved successfully",
                "data": [
                  {
                    "id": "uuid",
                    "email": "user@example.com",
                    "firstName": "John",
                    "lastName": "Doe",
                    "activeRole": {
                      "id": "user-role-uuid",
                      "roleName": "user",
                      "systemEditionId": "uuid",
                      "companyId": "uuid",
                      "channelId": null,
                      "expiresAt": null
                    },
                    "availableRoles": [
                      {
                        "id": "user-role-uuid",
                        "roleName": "user",
                        "systemEditionId": "uuid",
                        "companyId": "uuid",
                        "channelId": null,
                        "expiresAt": null,
                        "isActive": true
                      }
                    ],
                    "isActive": true,
                    "emailVerified": true,
                    "phoneNumber": "+1234567890",
                    "companyAssociations": ["uuid"],
                    "createdAt": "2024-01-01T00:00:00.000Z",
                    "updatedAt": "2024-01-01T00:00:00.000Z"
                  }
                ],
                "pagination": {
                  "page": 1,
                  "limit": 10,
                  "total": 1,
                  "totalPages": 1,
                  "hasNextPage": false,
                  "hasPrevPage": false
                },
                "timestamp": "2024-01-01T00:00:00.000Z"
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Emulation",
      "description": "User emulation endpoints (super admin only)",
      "item": [
        {
          "name": "Start User Emulation",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/users/emulate/{{user_id}}",
              "host": ["{{base_url}}"],
              "path": ["users", "emulate", "{{user_id}}"]
            },
            "description": "Start emulating a specific user (Super Admin only). This allows a super admin to act on behalf of another user."
          },
          "response": [
            {
              "name": "Success Response",
              "originalRequest": {
                "method": "POST",
                "url": {
                  "raw": "{{base_url}}/users/emulate/{{user_id}}"
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "body": {
                "success": true,
                "message": "Emulation started successfully",
                "data": {
                  "user": {
                    "id": "uuid",
                    "email": "emulated@example.com",
                    "firstName": "Emulated",
                    "lastName": "User",
                    "activeRole": {
                      "id": "user-role-uuid",
                      "roleName": "user",
                      "systemEditionId": "uuid",
                      "companyId": "uuid",
                      "channelId": null,
                      "expiresAt": null
                    },
                    "availableRoles": [
                      {
                        "id": "user-role-uuid",
                        "roleName": "user",
                        "systemEditionId": "uuid",
                        "companyId": "uuid",
                        "channelId": null,
                        "expiresAt": null,
                        "isActive": true
                      }
                    ],
                    "isActive": true,
                    "emailVerified": true,
                    "companyAssociations": ["uuid"],
                    "isEmulating": true,
                    "originalUser": {
                      "id": "uuid",
                      "email": "admin@example.com",
                      "firstName": "Admin",
                      "lastName": "User"
                    }
                  },
                  "token": "new_jwt_token_for_emulated_user",
                  "originalUser": {
                    "id": "uuid",
                    "email": "admin@example.com",
                    "role": "super_admin",
                    "firstName": "Admin",
                    "lastName": "User"
                  }
                },
                "timestamp": "2024-01-01T00:00:00.000Z"
              }
            }
          ]
        },
        {
          "name": "End User Emulation",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/users/end-emulation",
              "host": ["{{base_url}}"],
              "path": ["users", "end-emulation"]
            },
            "description": "End current user emulation and return to original user (Super Admin only)"
          },
          "response": [
            {
              "name": "Success Response",
              "originalRequest": {
                "method": "POST",
                "url": {
                  "raw": "{{base_url}}/users/end-emulation"
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "body": {
                "success": true,
                "message": "Emulation ended successfully",
                "data": {
                  "user": {
                    "id": "uuid",
                    "email": "admin@example.com",
                    "firstName": "Admin",
                    "lastName": "User",
                    "activeRole": {
                      "id": "user-role-uuid",
                      "roleName": "super_admin",
                      "systemEditionId": "uuid",
                      "companyId": "uuid",
                      "channelId": null,
                      "expiresAt": null
                    },
                    "availableRoles": [
                      {
                        "id": "user-role-uuid",
                        "roleName": "super_admin",
                        "systemEditionId": "uuid",
                        "companyId": "uuid",
                        "channelId": null,
                        "expiresAt": null,
                        "isActive": true
                      }
                    ],
                    "isActive": true,
                    "emailVerified": true,
                    "companyAssociations": ["uuid"],
                    "isEmulating": false
                  },
                  "token": "jwt_token_for_original_user"
                },
                "timestamp": "2024-01-01T00:00:00.000Z"
              }
            }
          ]
        }
      ]
    },
    {
      "name": "User Role Management",
      "description": "Role management endpoints for users with multiple roles",
      "item": [
        {
          "name": "Get Available Roles",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/user-roles/available",
              "host": ["{{base_url}}"],
              "path": ["user-roles", "available"]
            },
            "description": "Get all available roles for the current user"
          },
          "response": [
            {
              "name": "Success Response",
              "originalRequest": {
                "method": "GET",
                "url": {
                  "raw": "{{base_url}}/user-roles/available"
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "body": {
                "success": true,
                "message": "Available roles retrieved successfully",
                "data": [
                  {
                    "id": "user-role-uuid-1",
                    "roleName": "company_admin",
                    "systemEditionId": "uuid",
                    "companyId": "uuid",
                    "channelId": null,
                    "expiresAt": null,
                    "isActive": true
                  },
                  {
                    "id": "user-role-uuid-2",
                    "roleName": "user",
                    "systemEditionId": "uuid",
                    "companyId": "uuid",
                    "channelId": null,
                    "expiresAt": null,
                    "isActive": true
                  }
                ],
                "timestamp": "2024-01-01T00:00:00.000Z"
              }
            }
          ]
        },
        {
          "name": "Get Active Role",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/user-roles/active",
              "host": ["{{base_url}}"],
              "path": ["user-roles", "active"]
            },
            "description": "Get the currently active role for the user"
          },
          "response": [
            {
              "name": "Success Response",
              "originalRequest": {
                "method": "GET",
                "url": {
                  "raw": "{{base_url}}/user-roles/active"
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "body": {
                "success": true,
                "message": "Active role retrieved successfully",
                "data": {
                  "id": "user-role-uuid",
                  "roleName": "company_admin",
                  "systemEditionId": "uuid",
                  "companyId": "uuid",
                  "channelId": null,
                  "expiresAt": null
                },
                "timestamp": "2024-01-01T00:00:00.000Z"
              }
            }
          ]
        },
        {
          "name": "Set Active Role",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"userRoleId\": \"user-role-uuid\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{base_url}}/user-roles/active",
              "host": ["{{base_url}}"],
              "path": ["user-roles", "active"]
            },
            "description": "Set the active role for the current user"
          },
          "response": [
            {
              "name": "Success Response",
              "originalRequest": {
                "method": "POST",
                "url": {
                  "raw": "{{base_url}}/user-roles/active"
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "body": {
                "success": true,
                "message": "Active role set successfully",
                "data": {
                  "id": "user-role-uuid",
                  "roleName": "user",
                  "systemEditionId": "uuid",
                  "companyId": "uuid",
                  "channelId": null,
                  "expiresAt": null
                },
                "timestamp": "2024-01-01T00:00:00.000Z"
              }
            }
          ]
        },
        {
          "name": "Clear Active Role",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/user-roles/active",
              "host": ["{{base_url}}"],
              "path": ["user-roles", "active"]
            },
            "description": "Clear the currently active role for the user"
          },
          "response": [
            {
              "name": "Success Response",
              "originalRequest": {
                "method": "DELETE",
                "url": {
                  "raw": "{{base_url}}/user-roles/active"
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "body": {
                "success": true,
                "message": "Active role cleared successfully",
                "data": null,
                "timestamp": "2024-01-01T00:00:00.000Z"
              }
            }
          ]
        },
        {
          "name": "Switch Role",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"userRoleId\": \"user-role-uuid\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{base_url}}/user-roles/switch",
              "host": ["{{base_url}}"],
              "path": ["user-roles", "switch"]
            },
            "description": "Quick role switching with validation"
          },
          "response": [
            {
              "name": "Success Response",
              "originalRequest": {
                "method": "POST",
                "url": {
                  "raw": "{{base_url}}/user-roles/switch"
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "body": {
                "success": true,
                "message": "Role switched successfully",
                "data": {
                  "id": "user-role-uuid",
                  "roleName": "company_admin",
                  "systemEditionId": "uuid",
                  "companyId": "uuid",
                  "channelId": null,
                  "expiresAt": null
                },
                "timestamp": "2024-01-01T00:00:00.000Z"
              }
            }
          ]
        },
        {
          "name": "Validate Active Role",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/user-roles/validate",
              "host": ["{{base_url}}"],
              "path": ["user-roles", "validate"]
            },
            "description": "Validate the current active role"
          },
          "response": [
            {
              "name": "Success Response",
              "originalRequest": {
                "method": "GET",
                "url": {
                  "raw": "{{base_url}}/user-roles/validate"
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "body": {
                "success": true,
                "message": "Active role is valid",
                "data": {
                  "isValid": true,
                  "activeRole": {
                    "id": "user-role-uuid",
                    "roleName": "company_admin",
                    "systemEditionId": "uuid",
                    "companyId": "uuid",
                    "channelId": null,
                    "expiresAt": null
                  }
                },
                "timestamp": "2024-01-01T00:00:00.000Z"
              }
            }
          ]
        }
      ]
    }
  ]
} 